
<html>
    <head>
        <title>Coverage Report</title>
        
        <style type="text/css">
            body { background-color: #fff; }
            table {
                margin-left: 10px;
                border-collapse: collapse;
            }
            td { 
                background-color: #fff; 
                padding: 2px;
            }
            table.overview td {
                padding-right: 20px;
            }
            td.percent, td.linecount { text-align: right; }
            div.package, #totalcov { 
                color: #fff;
                background-color: #375eab; 
                font-size: 16px;
                font-weight: bold;
                padding: 10px;
                border-radius: 5px 5px 5px 5px;
            }
            div.package, #totalcov { 
                float: right; 
                right: 10px;
            }
            #totalcov { 
                top: 10px;
                position: relative;
                background-color: #fff;
                color: #000;
                border: 1px solid #375eab;
                clear: both;
            }
            #summaryWrapper {
                position: fixed;
                top: 10px;
                float: right;
                right: 10px;

            }
            span.packageTotal {
                float: right;
                color: #000;
            }
            #doctitle { 
                background-color: #fff; 
                font-size: 24px;
                margin-top: 20px;
                margin-left: 10px;
                color: #375eab;
                font-weight: bold;
            }
            #about {
                margin-left: 18px;
                font-size: 10px;
            }
            table tr:last-child td {
                font-weight: bold;
            }
            .functitle, .funcname { 
                text-align: center; 
                font-size: 20px; 
                font-weight: bold; 
                color: 375eab; 
            }
            .funcname {
                text-align: left;
                margin-top: 20px;
                margin-left: 10px;
                margin-bottom: 20px;
                padding: 2px 5px 5px;
                background-color: #e0ebf5;
            }
            table.listing {
                margin-left: 10px;
            }
            table.listing td {
                padding: 0px;
                font-size: 12px;
                background-color: #eee; 
                vertical-align: top;
                padding-left: 10px;
                border-bottom: 1px solid #fff;
            }
            table.listing td:first-child {
                text-align: right;
                font-weight: bold;
                vertical-align: center;
            }
            table.listing tr.miss td {
                background-color: #FFBBB8;
            }
            table.listing tr:last-child td {
                font-weight: normal;
                color: #000;
            }
            table.listing tr:last-child td:first-child {
                font-weight: bold;
            }
            .info {
                margin-left: 10px;
            }
            .info code {
            }
            pre { margin: 1px; }
            pre.cmd { 
                background-color: #e9e9e9;
                border-radius: 5px 5px 5px 5px;
                padding: 10px;
                margin: 20px;
                line-height: 18px;
                font-size; 14px;
            }
            a { 
                text-decoration: none; 
                color: #375eab;
            }
            a:hover { text-decoration: underline; }
            p { margin-left: 10px; }
        </style>
        
    </head>
    <body>
        <div id="doctitle">Coverage Report</div>
    <div id="about">Generated on 29 Oct 16 14:35 +0300 with <a href="https://github.com/matm/gocov-html">gocov-html</a></div><div class="funcname">Report Overview</div><table class="overview">
<tr id="s_pkg_file_share/handlers"><td><code><a href="#pkg_file_share/handlers">file_share/handlers</a></code></td><td class="percent"><code>61.96%</code></td><td class="linecount"><code>57/92</code></td></tr>
<tr id="s_pkg_file_share/jwt"><td><code><a href="#pkg_file_share/jwt">file_share/jwt</a></code></td><td class="percent"><code>73.33%</code></td><td class="linecount"><code>11/15</code></td></tr>
<tr id="s_pkg_file_share/repository/file"><td><code><a href="#pkg_file_share/repository/file">file_share/repository/file</a></code></td><td class="percent"><code>71.33%</code></td><td class="linecount"><code>107/150</code></td></tr>
<tr id="s_pkg_file_share/repository/user"><td><code><a href="#pkg_file_share/repository/user">file_share/repository/user</a></code></td><td class="percent"><code>76.92%</code></td><td class="linecount"><code>30/39</code></td></tr>
<tr><td><code>Report Total</code></td><td class="percent"><code>69.26%</code></td><td class="linecount"><code>205/296</code></td></tr>
</table>
<div id="pkg_file_share/handlers" class="funcname">Package Overview: file_share/handlers <span class="packageTotal">61.96%</span></div><p>This is a coverage report created after analysis of the <code>file_share/handlers</code> package. It 
        has been generated with the following command:</p><pre class="cmd">gocov test file_share/handlers | gocov-html</pre>        <p>Here are the stats. Please select a function name to view its implementation and see what's left for testing.</p><table class="overview">
<tr id="s_fn_UploadFile"><td><code><a href="#fn_UploadFile">UploadFile(...)</a></code></td><td><code>file_share/handlers/file.go</code></td><td class="percent"><code>88.89%</code></td><td class="linecount"><code>8/9</code></td></tr>
<tr id="s_fn_ListFiles"><td><code><a href="#fn_ListFiles">ListFiles(...)</a></code></td><td><code>file_share/handlers/file.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>8/12</code></td></tr>
<tr id="s_fn_MoveFile"><td><code><a href="#fn_MoveFile">MoveFile(...)</a></code></td><td><code>file_share/handlers/file.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>8/12</code></td></tr>
<tr id="s_fn_RenameFile"><td><code><a href="#fn_RenameFile">RenameFile(...)</a></code></td><td><code>file_share/handlers/file.go</code></td><td class="percent"><code>62.50%</code></td><td class="linecount"><code>5/8</code></td></tr>
<tr id="s_fn_SearchFiles"><td><code><a href="#fn_SearchFiles">SearchFiles(...)</a></code></td><td><code>file_share/handlers/file.go</code></td><td class="percent"><code>62.50%</code></td><td class="linecount"><code>5/8</code></td></tr>
<tr id="s_fn_DeleteFile"><td><code><a href="#fn_DeleteFile">DeleteFile(...)</a></code></td><td><code>file_share/handlers/file.go</code></td><td class="percent"><code>57.14%</code></td><td class="linecount"><code>4/7</code></td></tr>
<tr id="s_fn_createFolder"><td><code><a href="#fn_createFolder">createFolder(...)</a></code></td><td><code>file_share/handlers/file_helpers.go</code></td><td class="percent"><code>57.14%</code></td><td class="linecount"><code>4/7</code></td></tr>
<tr id="s_fn_uploadFile"><td><code><a href="#fn_uploadFile">uploadFile(...)</a></code></td><td><code>file_share/handlers/file_helpers.go</code></td><td class="percent"><code>57.14%</code></td><td class="linecount"><code>4/7</code></td></tr>
<tr id="s_fn_CreateUser"><td><code><a href="#fn_CreateUser">CreateUser(...)</a></code></td><td><code>file_share/handlers/user.go</code></td><td class="percent"><code>57.14%</code></td><td class="linecount"><code>4/7</code></td></tr>
<tr id="s_fn_LoginUser"><td><code><a href="#fn_LoginUser">LoginUser(...)</a></code></td><td><code>file_share/handlers/user.go</code></td><td class="percent"><code>53.85%</code></td><td class="linecount"><code>7/13</code></td></tr>
<tr id="s_fn_Front"><td><code><a href="#fn_Front">Front(...)</a></code></td><td><code>file_share/handlers/front.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/2</code></td></tr>
<tr><td colspan="2"><code>file_share/handlers</code></td><td class="percent"><code>61.96%</code></td><td class="linecount"><code>57/92</code></td></tr>
</table>

<div class="funcname" id="fn_UploadFile">func UploadFile</div><div class="info"><a href="#s_fn_UploadFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file.go</code>:</p></div><table class="listing">
<tr><td>11</td><td><code><pre>func UploadFile(w http.ResponseWriter, r *http.Request, appUser *models.User) {</pre></code></td></tr><tr><td>12</td><td><code><pre>        vars := mux.Vars(r)</pre></code></td></tr><tr><td>13</td><td><code><pre>        fileName := vars[&#34;fileName&#34;]</pre></code></td></tr><tr><td>14</td><td><code><pre>        var parent *string = nil</pre></code></td></tr><tr><td>15</td><td><code><pre>        parentHeader := r.Header.Get(&#34;File-Parent&#34;)</pre></code></td></tr><tr><td>16</td><td><code><pre>        if parentHeader != &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>17</td><td><code><pre>                parent = &amp;parentHeader</pre></code></td></tr><tr><td>18</td><td><code><pre>        }</pre></code></td></tr><tr><td>19</td><td><code><pre></pre></code></td></tr><tr><td>20</td><td><code><pre>        if folder := r.Header.Get(&#34;File-Folder&#34;); folder != &#34;&#34; {</pre></code></td></tr><tr><td>21</td><td><code><pre>                createFolder(fileName, parent, w, appUser)</pre></code></td></tr><tr><td>22</td><td><code><pre>        } else {</pre></code></td></tr><tr><td>23</td><td><code><pre>                uploadFile(fileName, parent, w, r, appUser)</pre></code></td></tr><tr><td>24</td><td><code><pre>        }</pre></code></td></tr><tr><td>25</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_ListFiles">func ListFiles</div><div class="info"><a href="#s_fn_ListFiles">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file.go</code>:</p></div><table class="listing">
<tr><td>28</td><td><code><pre>func ListFiles(w http.ResponseWriter, r *http.Request, appUser *models.User) {</pre></code></td></tr><tr><td>29</td><td><code><pre>        vars := mux.Vars(r)</pre></code></td></tr><tr><td>30</td><td><code><pre>        var files []models.File</pre></code></td></tr><tr><td>31</td><td><code><pre>        var err error</pre></code></td></tr><tr><td>32</td><td><code><pre></pre></code></td></tr><tr><td>33</td><td><code><pre>        if parent, ok := vars[&#34;parent&#34;]; ok {</pre></code></td></tr><tr class="miss"><td>34</td><td><code><pre>                files, err = file.ListFiles(&amp;parent, appUser)</pre></code></td></tr><tr><td>35</td><td><code><pre>        } else {</pre></code></td></tr><tr><td>36</td><td><code><pre>                files, err = file.ListFiles(nil, appUser)</pre></code></td></tr><tr><td>37</td><td><code><pre>        }</pre></code></td></tr><tr><td>38</td><td><code><pre></pre></code></td></tr><tr><td>39</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>40</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>41</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>42</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>43</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>44</td><td><code><pre>                return</pre></code></td></tr><tr><td>45</td><td><code><pre>        }</pre></code></td></tr><tr><td>46</td><td><code><pre></pre></code></td></tr><tr><td>47</td><td><code><pre></pre></code></td></tr><tr><td>48</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>49</td><td><code><pre>        json.NewEncoder(w).Encode(files)</pre></code></td></tr><tr><td>50</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_MoveFile">func MoveFile</div><div class="info"><a href="#s_fn_MoveFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file.go</code>:</p></div><table class="listing">
<tr><td>83</td><td><code><pre>func MoveFile(w http.ResponseWriter, r *http.Request, appUser *models.User) {</pre></code></td></tr><tr><td>84</td><td><code><pre>        vars := mux.Vars(r)</pre></code></td></tr><tr><td>85</td><td><code><pre>        parentID := r.FormValue(&#34;parentID&#34;)</pre></code></td></tr><tr><td>86</td><td><code><pre>        var parentPtr *string</pre></code></td></tr><tr><td>87</td><td><code><pre>        if parentID != &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>88</td><td><code><pre>                parentPtr = &amp;parentID</pre></code></td></tr><tr><td>89</td><td><code><pre>        }</pre></code></td></tr><tr><td>90</td><td><code><pre></pre></code></td></tr><tr><td>91</td><td><code><pre>        updateFile, err := file.MoveFile(vars[&#34;fileID&#34;], parentPtr, appUser)</pre></code></td></tr><tr><td>92</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>93</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>94</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>95</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>96</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>97</td><td><code><pre>                return</pre></code></td></tr><tr><td>98</td><td><code><pre>        }</pre></code></td></tr><tr><td>99</td><td><code><pre></pre></code></td></tr><tr><td>100</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>101</td><td><code><pre>        json.NewEncoder(w).Encode(updateFile)</pre></code></td></tr><tr><td>102</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_RenameFile">func RenameFile</div><div class="info"><a href="#s_fn_RenameFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file.go</code>:</p></div><table class="listing">
<tr><td>67</td><td><code><pre>func RenameFile(w http.ResponseWriter, r *http.Request, appUser *models.User) {</pre></code></td></tr><tr><td>68</td><td><code><pre>        vars := mux.Vars(r)</pre></code></td></tr><tr><td>69</td><td><code><pre></pre></code></td></tr><tr><td>70</td><td><code><pre>        updateFile, err := file.RenameFile(vars[&#34;fileID&#34;], r.FormValue(&#34;name&#34;), appUser)</pre></code></td></tr><tr><td>71</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>72</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>73</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>74</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>75</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>76</td><td><code><pre>                return</pre></code></td></tr><tr><td>77</td><td><code><pre>        }</pre></code></td></tr><tr><td>78</td><td><code><pre></pre></code></td></tr><tr><td>79</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>80</td><td><code><pre>        json.NewEncoder(w).Encode(updateFile)</pre></code></td></tr><tr><td>81</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_SearchFiles">func SearchFiles</div><div class="info"><a href="#s_fn_SearchFiles">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file.go</code>:</p></div><table class="listing">
<tr><td>105</td><td><code><pre>func SearchFiles(w http.ResponseWriter, r *http.Request, appUser *models.User) {</pre></code></td></tr><tr><td>106</td><td><code><pre>        vars := mux.Vars(r)</pre></code></td></tr><tr><td>107</td><td><code><pre>        files, err := file.SearchFiles(vars[&#34;keyword&#34;], appUser)</pre></code></td></tr><tr><td>108</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>109</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>110</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>111</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>112</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>113</td><td><code><pre>                return</pre></code></td></tr><tr><td>114</td><td><code><pre>        }</pre></code></td></tr><tr><td>115</td><td><code><pre></pre></code></td></tr><tr><td>116</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>117</td><td><code><pre>        json.NewEncoder(w).Encode(files)</pre></code></td></tr><tr><td>118</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DeleteFile">func DeleteFile</div><div class="info"><a href="#s_fn_DeleteFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file.go</code>:</p></div><table class="listing">
<tr><td>52</td><td><code><pre>func DeleteFile(w http.ResponseWriter, r *http.Request, appUser *models.User) {</pre></code></td></tr><tr><td>53</td><td><code><pre>        vars := mux.Vars(r)</pre></code></td></tr><tr><td>54</td><td><code><pre>        err := file.DeleteFile(vars[&#34;fileID&#34;], appUser)</pre></code></td></tr><tr><td>55</td><td><code><pre></pre></code></td></tr><tr><td>56</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>57</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>58</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>59</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>60</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>61</td><td><code><pre>                return</pre></code></td></tr><tr><td>62</td><td><code><pre>        }</pre></code></td></tr><tr><td>63</td><td><code><pre></pre></code></td></tr><tr><td>64</td><td><code><pre>        w.WriteHeader(http.StatusNoContent)</pre></code></td></tr><tr><td>65</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_createFolder">func createFolder</div><div class="info"><a href="#s_fn_createFolder">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file_helpers.go</code>:</p></div><table class="listing">
<tr><td>10</td><td><code><pre>func createFolder(fileName string, parent *string, w http.ResponseWriter, appUser *models.User) {</pre></code></td></tr><tr><td>11</td><td><code><pre>        folder, err := file.CreateFolder(fileName, parent, appUser)</pre></code></td></tr><tr><td>12</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>13</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>14</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>15</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>16</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>17</td><td><code><pre>                return</pre></code></td></tr><tr><td>18</td><td><code><pre>        }</pre></code></td></tr><tr><td>19</td><td><code><pre></pre></code></td></tr><tr><td>20</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>21</td><td><code><pre>        json.NewEncoder(w).Encode(folder)</pre></code></td></tr><tr><td>22</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_uploadFile">func uploadFile</div><div class="info"><a href="#s_fn_uploadFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/file_helpers.go</code>:</p></div><table class="listing">
<tr><td>24</td><td><code><pre>func uploadFile(fileName string, parent *string, w http.ResponseWriter, r *http.Request, appUser *models.User) {</pre></code></td></tr><tr><td>25</td><td><code><pre>        uploadedFile, err := file.UploadFile(r.Body, fileName, parent, appUser);</pre></code></td></tr><tr><td>26</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>27</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>28</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>29</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>30</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>31</td><td><code><pre>                return</pre></code></td></tr><tr><td>32</td><td><code><pre>        }</pre></code></td></tr><tr><td>33</td><td><code><pre></pre></code></td></tr><tr><td>34</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>35</td><td><code><pre>        json.NewEncoder(w).Encode(uploadedFile)</pre></code></td></tr><tr><td>36</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_CreateUser">func CreateUser</div><div class="info"><a href="#s_fn_CreateUser">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/user.go</code>:</p></div><table class="listing">
<tr><td>11</td><td><code><pre>func CreateUser(w http.ResponseWriter, r *http.Request) {</pre></code></td></tr><tr><td>12</td><td><code><pre>        user, err := user.CreateUser(</pre></code></td></tr><tr><td>13</td><td><code><pre>                r.FormValue(&#34;first_name&#34;),</pre></code></td></tr><tr><td>14</td><td><code><pre>                r.FormValue(&#34;last_name&#34;),</pre></code></td></tr><tr><td>15</td><td><code><pre>                r.FormValue(&#34;email&#34;),</pre></code></td></tr><tr><td>16</td><td><code><pre>                r.FormValue(&#34;password&#34;))</pre></code></td></tr><tr><td>17</td><td><code><pre></pre></code></td></tr><tr><td>18</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>19</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>20</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>21</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>22</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>23</td><td><code><pre>                return</pre></code></td></tr><tr><td>24</td><td><code><pre>        }</pre></code></td></tr><tr><td>25</td><td><code><pre></pre></code></td></tr><tr><td>26</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>27</td><td><code><pre>        json.NewEncoder(w).Encode(user)</pre></code></td></tr><tr><td>28</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LoginUser">func LoginUser</div><div class="info"><a href="#s_fn_LoginUser">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/user.go</code>:</p></div><table class="listing">
<tr><td>30</td><td><code><pre>func LoginUser(w http.ResponseWriter, r *http.Request) {</pre></code></td></tr><tr><td>31</td><td><code><pre>        appUser, err := user.CheckUser(r.FormValue(&#34;email&#34;), r.FormValue(&#34;password&#34;))</pre></code></td></tr><tr><td>32</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>33</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>34</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>35</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>36</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>37</td><td><code><pre>                return</pre></code></td></tr><tr><td>38</td><td><code><pre>        }</pre></code></td></tr><tr><td>39</td><td><code><pre></pre></code></td></tr><tr><td>40</td><td><code><pre>        tokenString, err := jwt.CreateToken(*appUser)</pre></code></td></tr><tr><td>41</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>42</td><td><code><pre>                w.WriteHeader(http.StatusBadRequest)</pre></code></td></tr><tr class="miss"><td>43</td><td><code><pre>                json.NewEncoder(w).Encode(models.Error{</pre></code></td></tr><tr><td>44</td><td><code><pre>                        Message: err.Error(),</pre></code></td></tr><tr><td>45</td><td><code><pre>                })</pre></code></td></tr><tr class="miss"><td>46</td><td><code><pre>                return</pre></code></td></tr><tr><td>47</td><td><code><pre>        }</pre></code></td></tr><tr><td>48</td><td><code><pre></pre></code></td></tr><tr><td>49</td><td><code><pre>        rsp := map[string]string{</pre></code></td></tr><tr><td>50</td><td><code><pre>                &#34;token&#34;: *tokenString,</pre></code></td></tr><tr><td>51</td><td><code><pre>        }</pre></code></td></tr><tr><td>52</td><td><code><pre></pre></code></td></tr><tr><td>53</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr><td>54</td><td><code><pre>        json.NewEncoder(w).Encode(rsp)</pre></code></td></tr><tr><td>55</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Front">func Front</div><div class="info"><a href="#s_fn_Front">Back</a><p>In <code>/home/mihael/gocode/src/file_share/handlers/front.go</code>:</p></div><table class="listing">
<tr><td>7</td><td><code><pre>func Front(w http.ResponseWriter, r *http.Request) {</pre></code></td></tr><tr class="miss"><td>8</td><td><code><pre>        w.WriteHeader(http.StatusOK)</pre></code></td></tr><tr class="miss"><td>9</td><td><code><pre>        w.Write([]byte(&#34;Hello World&#34;))</pre></code></td></tr><tr><td>10</td><td><code><pre>}</pre></code></td></tr></table>

<!-- Can be parsed by external script
PACKAGE:file_share/handlers DONE:61.96
-->

<div id="pkg_file_share/jwt" class="funcname">Package Overview: file_share/jwt <span class="packageTotal">73.33%</span></div><p>This is a coverage report created after analysis of the <code>file_share/jwt</code> package. It 
        has been generated with the following command:</p><pre class="cmd">gocov test file_share/jwt | gocov-html</pre>        <p>Here are the stats. Please select a function name to view its implementation and see what's left for testing.</p><table class="overview">
<tr id="s_fn_CreateToken"><td><code><a href="#fn_CreateToken">CreateToken(...)</a></code></td><td><code>file_share/jwt/jwt.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_CheckToken"><td><code><a href="#fn_CheckToken">CheckToken(...)</a></code></td><td><code>file_share/jwt/jwt.go</code></td><td class="percent"><code>71.43%</code></td><td class="linecount"><code>5/7</code></td></tr>
<tr id="s_fn_@32:39"><td><code><a href="#fn_@32:39">@32:39(...)</a></code></td><td><code>file_share/jwt/jwt.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>2/3</code></td></tr>
<tr><td colspan="2"><code>file_share/jwt</code></td><td class="percent"><code>73.33%</code></td><td class="linecount"><code>11/15</code></td></tr>
</table>

<div class="funcname" id="fn_CreateToken">func CreateToken</div><div class="info"><a href="#s_fn_CreateToken">Back</a><p>In <code>/home/mihael/gocode/src/file_share/jwt/jwt.go</code>:</p></div><table class="listing">
<tr><td>15</td><td><code><pre>func CreateToken(tokenUser models.User) (*string, error) {</pre></code></td></tr><tr><td>16</td><td><code><pre>        token := jwt.NewWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{</pre></code></td></tr><tr><td>17</td><td><code><pre>                &#34;ID&#34;: tokenUser.ID.Hex(),</pre></code></td></tr><tr><td>18</td><td><code><pre>                &#34;FirstName&#34;: tokenUser.FirstName,</pre></code></td></tr><tr><td>19</td><td><code><pre>                &#34;LastName&#34;: tokenUser.LastName,</pre></code></td></tr><tr><td>20</td><td><code><pre>                &#34;Email&#34;: tokenUser.Email,</pre></code></td></tr><tr><td>21</td><td><code><pre>                &#34;nbf&#34;: time.Now().Unix(),</pre></code></td></tr><tr><td>22</td><td><code><pre>        })</pre></code></td></tr><tr><td>23</td><td><code><pre>        tokenString, err := token.SignedString([]byte(config.Config.Secret))</pre></code></td></tr><tr><td>24</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>25</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>26</td><td><code><pre>        }</pre></code></td></tr><tr><td>27</td><td><code><pre></pre></code></td></tr><tr><td>28</td><td><code><pre>        return &amp;tokenString, nil</pre></code></td></tr><tr><td>29</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_CheckToken">func CheckToken</div><div class="info"><a href="#s_fn_CheckToken">Back</a><p>In <code>/home/mihael/gocode/src/file_share/jwt/jwt.go</code>:</p></div><table class="listing">
<tr><td>31</td><td><code><pre>func CheckToken(tokenString string) (*models.User, error) {</pre></code></td></tr><tr><td>32</td><td><code><pre>        token, err := jwt.Parse(tokenString, func(token *jwt.Token) (interface{}, error) {</pre></code></td></tr><tr><td>33</td><td><code><pre>                if _, ok := token.Method.(*jwt.SigningMethodHMAC); !ok {</pre></code></td></tr><tr><td>34</td><td><code><pre>                        return nil, fmt.Errorf(&#34;Unexpected signing method: %v&#34;, token.Header[&#34;alg&#34;])</pre></code></td></tr><tr><td>35</td><td><code><pre>                }</pre></code></td></tr><tr><td>36</td><td><code><pre>                return []byte(config.Config.Secret), nil</pre></code></td></tr><tr><td>37</td><td><code><pre>        })</pre></code></td></tr><tr><td>38</td><td><code><pre></pre></code></td></tr><tr><td>39</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>40</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>41</td><td><code><pre>        }</pre></code></td></tr><tr><td>42</td><td><code><pre></pre></code></td></tr><tr><td>43</td><td><code><pre>        if claims, ok := token.Claims.(jwt.MapClaims); ok &amp;&amp; token.Valid {</pre></code></td></tr><tr><td>44</td><td><code><pre></pre></code></td></tr><tr><td>45</td><td><code><pre>                returnUser := models.User{</pre></code></td></tr><tr><td>46</td><td><code><pre>                        ID:                 bson.ObjectIdHex(claims[&#34;ID&#34;].(string)),</pre></code></td></tr><tr><td>47</td><td><code><pre>                        Email:                claims[&#34;Email&#34;].(string),</pre></code></td></tr><tr><td>48</td><td><code><pre>                        Password:        &#34;&#34;,</pre></code></td></tr><tr><td>49</td><td><code><pre>                        FirstName:        claims[&#34;FirstName&#34;].(string),</pre></code></td></tr><tr><td>50</td><td><code><pre>                        LastName:        claims[&#34;LastName&#34;].(string),</pre></code></td></tr><tr><td>51</td><td><code><pre>                }</pre></code></td></tr><tr><td>52</td><td><code><pre></pre></code></td></tr><tr><td>53</td><td><code><pre>                return &amp;returnUser, nil</pre></code></td></tr><tr><td>54</td><td><code><pre>        }</pre></code></td></tr><tr><td>55</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>56</td><td><code><pre>        return nil, errors.New(&#34;Unable to validate token&#34;)</pre></code></td></tr><tr><td>57</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_@32:39">func @32:39</div><div class="info"><a href="#s_fn_@32:39">Back</a><p>In <code>/home/mihael/gocode/src/file_share/jwt/jwt.go</code>:</p></div><table class="listing">
<tr><td>32</td><td><code><pre>func(token *jwt.Token) (interface{}, error) {</pre></code></td></tr><tr><td>33</td><td><code><pre>                if _, ok := token.Method.(*jwt.SigningMethodHMAC); !ok {</pre></code></td></tr><tr class="miss"><td>34</td><td><code><pre>                        return nil, fmt.Errorf(&#34;Unexpected signing method: %v&#34;, token.Header[&#34;alg&#34;])</pre></code></td></tr><tr><td>35</td><td><code><pre>                }</pre></code></td></tr><tr><td>36</td><td><code><pre>                return []byte(config.Config.Secret), nil</pre></code></td></tr><tr><td>37</td><td><code><pre>        }</pre></code></td></tr></table>

<!-- Can be parsed by external script
PACKAGE:file_share/jwt DONE:73.33
-->

<div id="pkg_file_share/repository/file" class="funcname">Package Overview: file_share/repository/file <span class="packageTotal">71.33%</span></div><p>This is a coverage report created after analysis of the <code>file_share/repository/file</code> package. It 
        has been generated with the following command:</p><pre class="cmd">gocov test file_share/repository/file | gocov-html</pre>        <p>Here are the stats. Please select a function name to view its implementation and see what's left for testing.</p><table class="overview">
<tr id="s_fn_createRealPath"><td><code><a href="#fn_createRealPath">createRealPath(...)</a></code></td><td><code>file_share/repository/file/file_helpers.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>6/6</code></td></tr>
<tr id="s_fn_checkParent"><td><code><a href="#fn_checkParent">checkParent(...)</a></code></td><td><code>file_share/repository/file/file_helpers.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>8/10</code></td></tr>
<tr id="s_fn_FindByName"><td><code><a href="#fn_FindByName">FindByName(...)</a></code></td><td><code>file_share/repository/file/file_find.go</code></td><td class="percent"><code>77.78%</code></td><td class="linecount"><code>7/9</code></td></tr>
<tr id="s_fn_FindByID"><td><code><a href="#fn_FindByID">FindByID(...)</a></code></td><td><code>file_share/repository/file/file_find.go</code></td><td class="percent"><code>77.78%</code></td><td class="linecount"><code>7/9</code></td></tr>
<tr id="s_fn_FindByIDUser"><td><code><a href="#fn_FindByIDUser">FindByIDUser(...)</a></code></td><td><code>file_share/repository/file/file_find.go</code></td><td class="percent"><code>77.78%</code></td><td class="linecount"><code>7/9</code></td></tr>
<tr id="s_fn_MoveFile"><td><code><a href="#fn_MoveFile">MoveFile(...)</a></code></td><td><code>file_share/repository/file/file.go</code></td><td class="percent"><code>76.47%</code></td><td class="linecount"><code>13/17</code></td></tr>
<tr id="s_fn_CreateFolder"><td><code><a href="#fn_CreateFolder">CreateFolder(...)</a></code></td><td><code>file_share/repository/file/file.go</code></td><td class="percent"><code>75.00%</code></td><td class="linecount"><code>12/16</code></td></tr>
<tr id="s_fn_ListFiles"><td><code><a href="#fn_ListFiles">ListFiles(...)</a></code></td><td><code>file_share/repository/file/file.go</code></td><td class="percent"><code>72.73%</code></td><td class="linecount"><code>8/11</code></td></tr>
<tr id="s_fn_UploadFile"><td><code><a href="#fn_UploadFile">UploadFile(...)</a></code></td><td><code>file_share/repository/file/file.go</code></td><td class="percent"><code>69.57%</code></td><td class="linecount"><code>16/23</code></td></tr>
<tr id="s_fn_DeleteFile"><td><code><a href="#fn_DeleteFile">DeleteFile(...)</a></code></td><td><code>file_share/repository/file/file.go</code></td><td class="percent"><code>69.23%</code></td><td class="linecount"><code>9/13</code></td></tr>
<tr id="s_fn_RenameFile"><td><code><a href="#fn_RenameFile">RenameFile(...)</a></code></td><td><code>file_share/repository/file/file.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>14/21</code></td></tr>
<tr id="s_fn_SearchFiles"><td><code><a href="#fn_SearchFiles">SearchFiles(...)</a></code></td><td><code>file_share/repository/file/file.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/6</code></td></tr>
<tr><td colspan="2"><code>file_share/repository/file</code></td><td class="percent"><code>71.33%</code></td><td class="linecount"><code>107/150</code></td></tr>
</table>

<div class="funcname" id="fn_createRealPath">func createRealPath</div><div class="info"><a href="#s_fn_createRealPath">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file_helpers.go</code>:</p></div><table class="listing">
<tr><td>32</td><td><code><pre>func createRealPath() (realName string, realPath string, fullPath string) {</pre></code></td></tr><tr><td>33</td><td><code><pre>        now := time.Now()</pre></code></td></tr><tr><td>34</td><td><code><pre></pre></code></td></tr><tr><td>35</td><td><code><pre>        realName = uuid.NewV4().String()</pre></code></td></tr><tr><td>36</td><td><code><pre>        realPath = fmt.Sprintf(</pre></code></td></tr><tr><td>37</td><td><code><pre>                &#34;%s/%d/%d/%d/%d&#34;,</pre></code></td></tr><tr><td>38</td><td><code><pre>                config.Config.DataFolder,</pre></code></td></tr><tr><td>39</td><td><code><pre>                now.Year(),</pre></code></td></tr><tr><td>40</td><td><code><pre>                now.Month(),</pre></code></td></tr><tr><td>41</td><td><code><pre>                now.Day(),</pre></code></td></tr><tr><td>42</td><td><code><pre>                now.Hour())</pre></code></td></tr><tr><td>43</td><td><code><pre></pre></code></td></tr><tr><td>44</td><td><code><pre>        os.MkdirAll(realPath, 0777)</pre></code></td></tr><tr><td>45</td><td><code><pre>        fullPath = fmt.Sprintf(&#34;%s/%s&#34;, realPath, realName)</pre></code></td></tr><tr><td>46</td><td><code><pre>        return</pre></code></td></tr><tr><td>47</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_checkParent">func checkParent</div><div class="info"><a href="#s_fn_checkParent">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file_helpers.go</code>:</p></div><table class="listing">
<tr><td>14</td><td><code><pre>func checkParent(parentID *string) (*models.File, error) {</pre></code></td></tr><tr><td>15</td><td><code><pre>        var parent *models.File</pre></code></td></tr><tr><td>16</td><td><code><pre>        if parentID != nil {</pre></code></td></tr><tr><td>17</td><td><code><pre>                if !bson.IsObjectIdHex(*parentID) {</pre></code></td></tr><tr class="miss"><td>18</td><td><code><pre>                        return nil, errors.New(&#34;Wrong parent ID&#34;)</pre></code></td></tr><tr><td>19</td><td><code><pre>                }</pre></code></td></tr><tr><td>20</td><td><code><pre></pre></code></td></tr><tr><td>21</td><td><code><pre>                parentIDObj := bson.ObjectIdHex(*parentID)</pre></code></td></tr><tr><td>22</td><td><code><pre>                var err error</pre></code></td></tr><tr><td>23</td><td><code><pre>                parent, err = FindByID(parentIDObj)</pre></code></td></tr><tr><td>24</td><td><code><pre>                if err != nil {</pre></code></td></tr><tr class="miss"><td>25</td><td><code><pre>                        return nil, err</pre></code></td></tr><tr><td>26</td><td><code><pre>                }</pre></code></td></tr><tr><td>27</td><td><code><pre>        }</pre></code></td></tr><tr><td>28</td><td><code><pre></pre></code></td></tr><tr><td>29</td><td><code><pre>        return parent, nil</pre></code></td></tr><tr><td>30</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FindByName">func FindByName</div><div class="info"><a href="#s_fn_FindByName">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file_find.go</code>:</p></div><table class="listing">
<tr><td>9</td><td><code><pre>func FindByName(name string) (*models.File, error) {</pre></code></td></tr><tr><td>10</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>11</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>12</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>13</td><td><code><pre>        }</pre></code></td></tr><tr><td>14</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>15</td><td><code><pre></pre></code></td></tr><tr><td>16</td><td><code><pre>        findFile := models.File{}</pre></code></td></tr><tr><td>17</td><td><code><pre>        err = db.C(Collection).Find(bson.M{&#34;name&#34;: name}).One(&amp;findFile)</pre></code></td></tr><tr><td>18</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr><td>19</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>20</td><td><code><pre>        }</pre></code></td></tr><tr><td>21</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>22</td><td><code><pre>        return &amp;findFile, nil</pre></code></td></tr><tr><td>23</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FindByID">func FindByID</div><div class="info"><a href="#s_fn_FindByID">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file_find.go</code>:</p></div><table class="listing">
<tr><td>25</td><td><code><pre>func FindByID(fileID bson.ObjectId) (*models.File, error) {</pre></code></td></tr><tr><td>26</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>27</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>28</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>29</td><td><code><pre>        }</pre></code></td></tr><tr><td>30</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>31</td><td><code><pre></pre></code></td></tr><tr><td>32</td><td><code><pre>        findFile := models.File{}</pre></code></td></tr><tr><td>33</td><td><code><pre>        err = db.C(Collection).Find(bson.M{&#34;_id&#34;: fileID}).One(&amp;findFile)</pre></code></td></tr><tr><td>34</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>35</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>36</td><td><code><pre>        }</pre></code></td></tr><tr><td>37</td><td><code><pre></pre></code></td></tr><tr><td>38</td><td><code><pre>        return &amp;findFile, nil</pre></code></td></tr><tr><td>39</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FindByIDUser">func FindByIDUser</div><div class="info"><a href="#s_fn_FindByIDUser">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file_find.go</code>:</p></div><table class="listing">
<tr><td>41</td><td><code><pre>func FindByIDUser(fileID bson.ObjectId, userID bson.ObjectId) (*models.File, error) {</pre></code></td></tr><tr><td>42</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>43</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>44</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>45</td><td><code><pre>        }</pre></code></td></tr><tr><td>46</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>47</td><td><code><pre></pre></code></td></tr><tr><td>48</td><td><code><pre>        findFile := models.File{}</pre></code></td></tr><tr><td>49</td><td><code><pre>        err = db.C(Collection).Find(bson.M{&#34;_id&#34;: fileID, &#34;userID&#34;: userID}).One(&amp;findFile)</pre></code></td></tr><tr><td>50</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>51</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>52</td><td><code><pre>        }</pre></code></td></tr><tr><td>53</td><td><code><pre></pre></code></td></tr><tr><td>54</td><td><code><pre>        return &amp;findFile, nil</pre></code></td></tr><tr><td>55</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_MoveFile">func MoveFile</div><div class="info"><a href="#s_fn_MoveFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file.go</code>:</p></div><table class="listing">
<tr><td>190</td><td><code><pre>func MoveFile(fileID string, parentID *string, appUser *models.User) (*models.File, error) {</pre></code></td></tr><tr><td>191</td><td><code><pre>        if !bson.IsObjectIdHex(fileID) || (parentID != nil &amp;&amp; !bson.IsObjectIdHex(*parentID)) {</pre></code></td></tr><tr class="miss"><td>192</td><td><code><pre>                return nil, errors.New(&#34;Wrong ID&#34;)</pre></code></td></tr><tr><td>193</td><td><code><pre>        }</pre></code></td></tr><tr><td>194</td><td><code><pre></pre></code></td></tr><tr><td>195</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>196</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>197</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>198</td><td><code><pre>        }</pre></code></td></tr><tr><td>199</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>200</td><td><code><pre></pre></code></td></tr><tr><td>201</td><td><code><pre>        updateFile, err := FindByIDUser(bson.ObjectIdHex(fileID), appUser.ID)</pre></code></td></tr><tr><td>202</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>203</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>204</td><td><code><pre>        }</pre></code></td></tr><tr><td>205</td><td><code><pre></pre></code></td></tr><tr><td>206</td><td><code><pre>        if parentID != nil {</pre></code></td></tr><tr><td>207</td><td><code><pre>                updateFile.ParentID = bson.ObjectIdHex(*parentID)</pre></code></td></tr><tr><td>208</td><td><code><pre>        } else {</pre></code></td></tr><tr><td>209</td><td><code><pre>                var parent bson.ObjectId</pre></code></td></tr><tr><td>210</td><td><code><pre>                updateFile.ParentID = parent</pre></code></td></tr><tr><td>211</td><td><code><pre>        }</pre></code></td></tr><tr><td>212</td><td><code><pre></pre></code></td></tr><tr><td>213</td><td><code><pre>        err = db.C(Collection).Update(bson.M{&#34;_id&#34;: updateFile.ID, &#34;userID&#34;: appUser.ID}, updateFile)</pre></code></td></tr><tr><td>214</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>215</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>216</td><td><code><pre>        }</pre></code></td></tr><tr><td>217</td><td><code><pre></pre></code></td></tr><tr><td>218</td><td><code><pre>        return updateFile, nil</pre></code></td></tr><tr><td>219</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_CreateFolder">func CreateFolder</div><div class="info"><a href="#s_fn_CreateFolder">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file.go</code>:</p></div><table class="listing">
<tr><td>70</td><td><code><pre>func CreateFolder(fileName string, parentID *string, appUser *models.User) (uploadedFile *models.File, err error) {</pre></code></td></tr><tr><td>71</td><td><code><pre>        parent, err := checkParent(parentID)</pre></code></td></tr><tr><td>72</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>73</td><td><code><pre>                return</pre></code></td></tr><tr><td>74</td><td><code><pre>        }</pre></code></td></tr><tr><td>75</td><td><code><pre></pre></code></td></tr><tr><td>76</td><td><code><pre>        if sameName, err := FindByName(fileName); err == nil &amp;&amp; sameName.IsDir {</pre></code></td></tr><tr class="miss"><td>77</td><td><code><pre>                return nil, errors.New(&#34;File already exists&#34;)</pre></code></td></tr><tr><td>78</td><td><code><pre>        }</pre></code></td></tr><tr><td>79</td><td><code><pre></pre></code></td></tr><tr><td>80</td><td><code><pre></pre></code></td></tr><tr><td>81</td><td><code><pre>        uploadedFile = &amp;models.File{</pre></code></td></tr><tr><td>82</td><td><code><pre>                ID:                bson.NewObjectId(),</pre></code></td></tr><tr><td>83</td><td><code><pre>                IsDir:                true,</pre></code></td></tr><tr><td>84</td><td><code><pre>                Name:                fileName,</pre></code></td></tr><tr><td>85</td><td><code><pre>                Created:        time.Now(),</pre></code></td></tr><tr><td>86</td><td><code><pre>                Updated:        time.Now(),</pre></code></td></tr><tr><td>87</td><td><code><pre>                UserID:                appUser.ID,</pre></code></td></tr><tr><td>88</td><td><code><pre>        }</pre></code></td></tr><tr><td>89</td><td><code><pre></pre></code></td></tr><tr><td>90</td><td><code><pre>        if parent != nil {</pre></code></td></tr><tr><td>91</td><td><code><pre>                uploadedFile.ParentID = parent.ID</pre></code></td></tr><tr><td>92</td><td><code><pre>        }</pre></code></td></tr><tr><td>93</td><td><code><pre></pre></code></td></tr><tr><td>94</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>95</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>96</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>97</td><td><code><pre>        }</pre></code></td></tr><tr><td>98</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>99</td><td><code><pre></pre></code></td></tr><tr><td>100</td><td><code><pre>        err = db.C(Collection).Insert(uploadedFile)</pre></code></td></tr><tr><td>101</td><td><code><pre></pre></code></td></tr><tr><td>102</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>103</td><td><code><pre>                return</pre></code></td></tr><tr><td>104</td><td><code><pre>        }</pre></code></td></tr><tr><td>105</td><td><code><pre></pre></code></td></tr><tr><td>106</td><td><code><pre>        return uploadedFile, nil</pre></code></td></tr><tr><td>107</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_ListFiles">func ListFiles</div><div class="info"><a href="#s_fn_ListFiles">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file.go</code>:</p></div><table class="listing">
<tr><td>110</td><td><code><pre>func ListFiles(folderID *string, appUser *models.User) (files []models.File, err error) {</pre></code></td></tr><tr><td>111</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>112</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>113</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>114</td><td><code><pre>        }</pre></code></td></tr><tr><td>115</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>116</td><td><code><pre></pre></code></td></tr><tr><td>117</td><td><code><pre>        var parent *models.File</pre></code></td></tr><tr><td>118</td><td><code><pre></pre></code></td></tr><tr><td>119</td><td><code><pre>        if parent, err = checkParent(folderID); err == nil &amp;&amp; parent != nil {</pre></code></td></tr><tr class="miss"><td>120</td><td><code><pre>                folderOBJID := bson.ObjectIdHex(*folderID)</pre></code></td></tr><tr class="miss"><td>121</td><td><code><pre>                err = db.C(Collection).Find(bson.M{&#34;parentID&#34;: folderOBJID, &#34;userID&#34;: appUser.ID}).All(&amp;files)</pre></code></td></tr><tr><td>122</td><td><code><pre>        } else if err == nil &amp;&amp; parent == nil {</pre></code></td></tr><tr><td>123</td><td><code><pre>                err = db.C(Collection).Find(bson.M{&#34;parentID&#34;: bson.M{&#34;$exists&#34;: false}, &#34;userID&#34;: appUser.ID}).All(&amp;files)</pre></code></td></tr><tr><td>124</td><td><code><pre>        }</pre></code></td></tr><tr><td>125</td><td><code><pre></pre></code></td></tr><tr><td>126</td><td><code><pre>        return</pre></code></td></tr><tr><td>127</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_UploadFile">func UploadFile</div><div class="info"><a href="#s_fn_UploadFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file.go</code>:</p></div><table class="listing">
<tr><td>16</td><td><code><pre>func UploadFile(reader io.Reader, fileName string, parentID *string, appUser *models.User) (uploadedFile *models.File, err error) {</pre></code></td></tr><tr><td>17</td><td><code><pre></pre></code></td></tr><tr><td>18</td><td><code><pre>        parent, err := checkParent(parentID)</pre></code></td></tr><tr><td>19</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>20</td><td><code><pre>                return</pre></code></td></tr><tr><td>21</td><td><code><pre>        }</pre></code></td></tr><tr><td>22</td><td><code><pre></pre></code></td></tr><tr><td>23</td><td><code><pre>        if sameName, err := FindByName(fileName); err == nil &amp;&amp; !sameName.IsDir {</pre></code></td></tr><tr class="miss"><td>24</td><td><code><pre>                return nil, errors.New(&#34;File already exists&#34;)</pre></code></td></tr><tr><td>25</td><td><code><pre>        }</pre></code></td></tr><tr><td>26</td><td><code><pre></pre></code></td></tr><tr><td>27</td><td><code><pre>        realName, realPath, fullPath := createRealPath()</pre></code></td></tr><tr><td>28</td><td><code><pre></pre></code></td></tr><tr><td>29</td><td><code><pre>        file, err := os.Create(fullPath)</pre></code></td></tr><tr><td>30</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>31</td><td><code><pre>                return</pre></code></td></tr><tr><td>32</td><td><code><pre>        }</pre></code></td></tr><tr><td>33</td><td><code><pre></pre></code></td></tr><tr><td>34</td><td><code><pre>        size, err := io.Copy(file, reader)</pre></code></td></tr><tr><td>35</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>36</td><td><code><pre>                return</pre></code></td></tr><tr><td>37</td><td><code><pre>        }</pre></code></td></tr><tr><td>38</td><td><code><pre></pre></code></td></tr><tr><td>39</td><td><code><pre>        uploadedFile = &amp;models.File{</pre></code></td></tr><tr><td>40</td><td><code><pre>                ID:                bson.NewObjectId(),</pre></code></td></tr><tr><td>41</td><td><code><pre>                FileSize:        uint(size),</pre></code></td></tr><tr><td>42</td><td><code><pre>                RealName:        realName,</pre></code></td></tr><tr><td>43</td><td><code><pre>                RealPath:        realPath,</pre></code></td></tr><tr><td>44</td><td><code><pre>                IsDir:                false,</pre></code></td></tr><tr><td>45</td><td><code><pre>                Name:                fileName,</pre></code></td></tr><tr><td>46</td><td><code><pre>                Created:        time.Now(),</pre></code></td></tr><tr><td>47</td><td><code><pre>                Updated:        time.Now(),</pre></code></td></tr><tr><td>48</td><td><code><pre>                UserID:                appUser.ID,</pre></code></td></tr><tr><td>49</td><td><code><pre>        }</pre></code></td></tr><tr><td>50</td><td><code><pre></pre></code></td></tr><tr><td>51</td><td><code><pre>        if parent != nil {</pre></code></td></tr><tr class="miss"><td>52</td><td><code><pre>                uploadedFile.ParentID = parent.ID</pre></code></td></tr><tr><td>53</td><td><code><pre>        }</pre></code></td></tr><tr><td>54</td><td><code><pre></pre></code></td></tr><tr><td>55</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>56</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>57</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>58</td><td><code><pre>        }</pre></code></td></tr><tr><td>59</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>60</td><td><code><pre></pre></code></td></tr><tr><td>61</td><td><code><pre>        err = db.C(Collection).Insert(uploadedFile)</pre></code></td></tr><tr><td>62</td><td><code><pre></pre></code></td></tr><tr><td>63</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>64</td><td><code><pre>                return</pre></code></td></tr><tr><td>65</td><td><code><pre>        }</pre></code></td></tr><tr><td>66</td><td><code><pre></pre></code></td></tr><tr><td>67</td><td><code><pre>        return uploadedFile, nil</pre></code></td></tr><tr><td>68</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DeleteFile">func DeleteFile</div><div class="info"><a href="#s_fn_DeleteFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file.go</code>:</p></div><table class="listing">
<tr><td>129</td><td><code><pre>func DeleteFile(fileID string, appUser *models.User) error {</pre></code></td></tr><tr><td>130</td><td><code><pre>        if !bson.IsObjectIdHex(fileID) {</pre></code></td></tr><tr class="miss"><td>131</td><td><code><pre>                return errors.New(&#34;Wrong file ID&#34;)</pre></code></td></tr><tr><td>132</td><td><code><pre>        }</pre></code></td></tr><tr><td>133</td><td><code><pre></pre></code></td></tr><tr><td>134</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>135</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>136</td><td><code><pre>                return err</pre></code></td></tr><tr><td>137</td><td><code><pre>        }</pre></code></td></tr><tr><td>138</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>139</td><td><code><pre></pre></code></td></tr><tr><td>140</td><td><code><pre>        deleteFile, err := FindByID(bson.ObjectIdHex(fileID))</pre></code></td></tr><tr><td>141</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>142</td><td><code><pre>                return err</pre></code></td></tr><tr><td>143</td><td><code><pre>        }</pre></code></td></tr><tr><td>144</td><td><code><pre></pre></code></td></tr><tr><td>145</td><td><code><pre>        err = db.C(Collection).Remove(bson.M{&#34;_id&#34;: deleteFile.ID, &#34;userID&#34;: appUser.ID})</pre></code></td></tr><tr><td>146</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>147</td><td><code><pre>                return err</pre></code></td></tr><tr><td>148</td><td><code><pre>        }</pre></code></td></tr><tr><td>149</td><td><code><pre></pre></code></td></tr><tr><td>150</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>151</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_RenameFile">func RenameFile</div><div class="info"><a href="#s_fn_RenameFile">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file.go</code>:</p></div><table class="listing">
<tr><td>153</td><td><code><pre>func RenameFile(fileID string, fileName string, appUser *models.User) (*models.File, error) {</pre></code></td></tr><tr><td>154</td><td><code><pre>        if !bson.IsObjectIdHex(fileID) {</pre></code></td></tr><tr class="miss"><td>155</td><td><code><pre>                return nil, errors.New(&#34;Wrong file ID&#34;)</pre></code></td></tr><tr><td>156</td><td><code><pre>        }</pre></code></td></tr><tr><td>157</td><td><code><pre></pre></code></td></tr><tr><td>158</td><td><code><pre>        match, err := regexp.MatchString(&#34;[0-9a-zA-Z._]+&#34;, fileName)</pre></code></td></tr><tr><td>159</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>160</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>161</td><td><code><pre>        }</pre></code></td></tr><tr><td>162</td><td><code><pre>        if !match {</pre></code></td></tr><tr class="miss"><td>163</td><td><code><pre>                return nil, errors.New(&#34;Wrong file name&#34;)</pre></code></td></tr><tr><td>164</td><td><code><pre>        }</pre></code></td></tr><tr><td>165</td><td><code><pre></pre></code></td></tr><tr><td>166</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>167</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>168</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>169</td><td><code><pre>        }</pre></code></td></tr><tr><td>170</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>171</td><td><code><pre></pre></code></td></tr><tr><td>172</td><td><code><pre>        updateFile, err := FindByID(bson.ObjectIdHex(fileID))</pre></code></td></tr><tr><td>173</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>174</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>175</td><td><code><pre>        }</pre></code></td></tr><tr><td>176</td><td><code><pre>        if updateFile.UserID != appUser.ID {</pre></code></td></tr><tr class="miss"><td>177</td><td><code><pre>                return nil, errors.New(&#34;Wrong file ID&#34;)</pre></code></td></tr><tr><td>178</td><td><code><pre>        }</pre></code></td></tr><tr><td>179</td><td><code><pre></pre></code></td></tr><tr><td>180</td><td><code><pre>        updateFile.Name = fileName</pre></code></td></tr><tr><td>181</td><td><code><pre></pre></code></td></tr><tr><td>182</td><td><code><pre>        err = db.C(Collection).Update(bson.M{&#34;_id&#34;: updateFile.ID, &#34;userID&#34;: appUser.ID}, updateFile)</pre></code></td></tr><tr><td>183</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>184</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>185</td><td><code><pre>        }</pre></code></td></tr><tr><td>186</td><td><code><pre></pre></code></td></tr><tr><td>187</td><td><code><pre>        return updateFile, nil</pre></code></td></tr><tr><td>188</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_SearchFiles">func SearchFiles</div><div class="info"><a href="#s_fn_SearchFiles">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/file/file.go</code>:</p></div><table class="listing">
<tr><td>221</td><td><code><pre>func SearchFiles(keyword string, appUser *models.User) (files []models.File, err error) {</pre></code></td></tr><tr class="miss"><td>222</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr class="miss"><td>223</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>224</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>225</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>226</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>227</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>228</td><td><code><pre>        err = db.C(Collection).Find(bson.M{&#34;name&#34;: bson.RegEx{</pre></code></td></tr><tr><td>229</td><td><code><pre>                Pattern: keyword,</pre></code></td></tr><tr><td>230</td><td><code><pre>                Options: &#34;&#34;,</pre></code></td></tr><tr><td>231</td><td><code><pre>        }, &#34;userID&#34;: appUser.ID}).All(&amp;files)</pre></code></td></tr><tr><td>232</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>233</td><td><code><pre>        return</pre></code></td></tr><tr><td>234</td><td><code><pre>}</pre></code></td></tr></table>

<!-- Can be parsed by external script
PACKAGE:file_share/repository/file DONE:71.33
-->

<div id="pkg_file_share/repository/user" class="funcname">Package Overview: file_share/repository/user <span class="packageTotal">76.92%</span></div><p>This is a coverage report created after analysis of the <code>file_share/repository/user</code> package. It 
        has been generated with the following command:</p><pre class="cmd">gocov test file_share/repository/user | gocov-html</pre>        <p>Here are the stats. Please select a function name to view its implementation and see what's left for testing.</p><table class="overview">
<tr id="s_fn_FindUserByEmail"><td><code><a href="#fn_FindUserByEmail">FindUserByEmail(...)</a></code></td><td><code>file_share/repository/user/user.go</code></td><td class="percent"><code>88.89%</code></td><td class="linecount"><code>8/9</code></td></tr>
<tr id="s_fn_CreateUser"><td><code><a href="#fn_CreateUser">CreateUser(...)</a></code></td><td><code>file_share/repository/user/user.go</code></td><td class="percent"><code>76.47%</code></td><td class="linecount"><code>13/17</code></td></tr>
<tr id="s_fn_DeleteUser"><td><code><a href="#fn_DeleteUser">DeleteUser(...)</a></code></td><td><code>file_share/repository/user/user.go</code></td><td class="percent"><code>71.43%</code></td><td class="linecount"><code>5/7</code></td></tr>
<tr id="s_fn_CheckUser"><td><code><a href="#fn_CheckUser">CheckUser(...)</a></code></td><td><code>file_share/repository/user/user.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>4/6</code></td></tr>
<tr><td colspan="2"><code>file_share/repository/user</code></td><td class="percent"><code>76.92%</code></td><td class="linecount"><code>30/39</code></td></tr>
</table>

<div class="funcname" id="fn_FindUserByEmail">func FindUserByEmail</div><div class="info"><a href="#s_fn_FindUserByEmail">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/user/user.go</code>:</p></div><table class="listing">
<tr><td>49</td><td><code><pre>func FindUserByEmail(email string) (*models.User, error) {</pre></code></td></tr><tr><td>50</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>51</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>52</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>53</td><td><code><pre>        }</pre></code></td></tr><tr><td>54</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>55</td><td><code><pre></pre></code></td></tr><tr><td>56</td><td><code><pre>        user := models.User{}</pre></code></td></tr><tr><td>57</td><td><code><pre></pre></code></td></tr><tr><td>58</td><td><code><pre>        err = db.C(Collection).Find(bson.M{&#34;email&#34;: email}).One(&amp;user)</pre></code></td></tr><tr><td>59</td><td><code><pre></pre></code></td></tr><tr><td>60</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr><td>61</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>62</td><td><code><pre>        }</pre></code></td></tr><tr><td>63</td><td><code><pre></pre></code></td></tr><tr><td>64</td><td><code><pre>        return &amp;user, nil</pre></code></td></tr><tr><td>65</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_CreateUser">func CreateUser</div><div class="info"><a href="#s_fn_CreateUser">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/user/user.go</code>:</p></div><table class="listing">
<tr><td>14</td><td><code><pre>func CreateUser(firstName string, lastName string, email string, password string) (*models.User, error) {</pre></code></td></tr><tr><td>15</td><td><code><pre>        user := models.User{</pre></code></td></tr><tr><td>16</td><td><code><pre>                FirstName:        firstName,</pre></code></td></tr><tr><td>17</td><td><code><pre>                LastName:        lastName,</pre></code></td></tr><tr><td>18</td><td><code><pre>                Email:                email,</pre></code></td></tr><tr><td>19</td><td><code><pre>                Password:        password,</pre></code></td></tr><tr><td>20</td><td><code><pre>        }</pre></code></td></tr><tr><td>21</td><td><code><pre></pre></code></td></tr><tr><td>22</td><td><code><pre>        if err := validator.New().Struct(user); err != nil {</pre></code></td></tr><tr class="miss"><td>23</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>24</td><td><code><pre>        }</pre></code></td></tr><tr><td>25</td><td><code><pre></pre></code></td></tr><tr><td>26</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>27</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>28</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>29</td><td><code><pre>        }</pre></code></td></tr><tr><td>30</td><td><code><pre>        defer session.Close()</pre></code></td></tr><tr><td>31</td><td><code><pre></pre></code></td></tr><tr><td>32</td><td><code><pre>        _, err = FindUserByEmail(email)</pre></code></td></tr><tr><td>33</td><td><code><pre></pre></code></td></tr><tr><td>34</td><td><code><pre>        if err == nil {</pre></code></td></tr><tr class="miss"><td>35</td><td><code><pre>                return nil, errors.New(&#34;User already exists&#34;)</pre></code></td></tr><tr><td>36</td><td><code><pre>        }</pre></code></td></tr><tr><td>37</td><td><code><pre></pre></code></td></tr><tr><td>38</td><td><code><pre>        user.ID = bson.NewObjectId()</pre></code></td></tr><tr><td>39</td><td><code><pre>        pass, err := bcrypt.GenerateFromPassword([]byte(user.Password), bcrypt.DefaultCost)</pre></code></td></tr><tr><td>40</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>41</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>42</td><td><code><pre>        }</pre></code></td></tr><tr><td>43</td><td><code><pre>        user.Password = string(pass)</pre></code></td></tr><tr><td>44</td><td><code><pre>        db.C(Collection).Insert(&amp;user)</pre></code></td></tr><tr><td>45</td><td><code><pre></pre></code></td></tr><tr><td>46</td><td><code><pre>        return &amp;user, nil</pre></code></td></tr><tr><td>47</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DeleteUser">func DeleteUser</div><div class="info"><a href="#s_fn_DeleteUser">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/user/user.go</code>:</p></div><table class="listing">
<tr><td>67</td><td><code><pre>func DeleteUser(userID bson.ObjectId) error {</pre></code></td></tr><tr><td>68</td><td><code><pre>        session, db, err := database.GetSession()</pre></code></td></tr><tr><td>69</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>70</td><td><code><pre>                return err</pre></code></td></tr><tr><td>71</td><td><code><pre>        }</pre></code></td></tr><tr><td>72</td><td><code><pre>        defer session.Clone()</pre></code></td></tr><tr><td>73</td><td><code><pre></pre></code></td></tr><tr><td>74</td><td><code><pre>        if err = db.C(Collection).RemoveId(userID); err != nil {</pre></code></td></tr><tr class="miss"><td>75</td><td><code><pre>                return err</pre></code></td></tr><tr><td>76</td><td><code><pre>        }</pre></code></td></tr><tr><td>77</td><td><code><pre></pre></code></td></tr><tr><td>78</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>79</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_CheckUser">func CheckUser</div><div class="info"><a href="#s_fn_CheckUser">Back</a><p>In <code>/home/mihael/gocode/src/file_share/repository/user/user.go</code>:</p></div><table class="listing">
<tr><td>81</td><td><code><pre>func CheckUser(email string, password string) (*models.User, error) {</pre></code></td></tr><tr><td>82</td><td><code><pre>        user, err := FindUserByEmail(email);</pre></code></td></tr><tr><td>83</td><td><code><pre>        if  err != nil {</pre></code></td></tr><tr class="miss"><td>84</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>85</td><td><code><pre>        }</pre></code></td></tr><tr><td>86</td><td><code><pre></pre></code></td></tr><tr><td>87</td><td><code><pre>        if err := bcrypt.CompareHashAndPassword([]byte(user.Password), []byte(password)); err != nil {</pre></code></td></tr><tr class="miss"><td>88</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>89</td><td><code><pre>        }</pre></code></td></tr><tr><td>90</td><td><code><pre></pre></code></td></tr><tr><td>91</td><td><code><pre></pre></code></td></tr><tr><td>92</td><td><code><pre>        return user, nil</pre></code></td></tr><tr><td>93</td><td><code><pre>}</pre></code></td></tr></table>

<!-- Can be parsed by external script
PACKAGE:file_share/repository/user DONE:76.92
-->

<div id="summaryWrapper"><div class="package">Report Total</div>
<div id="totalcov">69.26%</div>
</div>
    </body>
